<head>
	<title>meteorhack14</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>

<body>
	{{> main}}
</body>

<template name="main">
	{{> nav}}
	{{#if instanceIsServer}}
	{{> serverWarning}}
	{{/if}}
	{{#if userLoggedIn}}
	<div class="container">
		<div class="col-xs-12 col-md-8" id="buttonView">
			<div class="innerContainer">
				{{> modeHeading}}
				{{> buttons}}
				{{#if isAdmin}}
				{{> adminPanel}}
				{{/if}}
			</div>
		</div>
		<div class="col-xs-12 col-md-4" id="commandsView">
			<div class="innerContainer">
				<canvas id="barGraph" height="300" hidden></canvas>
				{{> commandList}}
				</div>
		</div>
	</div>
	{{else}}
	{{> landingPage}}
	{{/if}}
</template>

<template name="serverWarning">
    <div class="row text-center">
        <h1>This is the Local Server!</h1>
        <p>This meteor instance connects to the drone on local wifi!  A browser window is not needed to run!</p>
    </div>
    <br>
    <br>
</template>

<template name="landingPage">
<div class="jumbotron">
	<h1>Welcome to Meteor Flies Drone</h1>
	<p>Please log in or create an account to begin.</p>
</div>
</template>

<template name="nav">
	<nav class="navbar navbar-inverse" role="navigation">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<a class="navbar-brand" href="#">Meteor Flies Drone</a>
			</div>
			<ul class = "nav navbar-nav navbar-right">
				<li>{{> loginButtons}}</li>
			</ul>

		</div><!-- /.container-fluid -->
	</nav>
</template>

<template name="modeHeading">
<h1>Current mode is {{mode}}</h1>
{{#if timeLeft}}
<h3>Time Until Next Input: {{timeLeft}}</h3>
{{/if}}
</template>

<template name="commandList">
	<ul id = "commandList">
		{{#each commands}}
			<li class={{currentCommand}}>
			<i class="fa {{commandIcon}}"></i>
			{{#if userId}}
		 	by {{username userId}}
			{{else}}
			chosen by democracy
			{{/if}}
			</li>
		{{/each}}
	</ul>
	{{tickNow}}
</template>
